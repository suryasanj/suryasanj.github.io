<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="./src/style/output.css" rel="stylesheet">
		<title>Home</title>
	</head>

	<body class="text-slate-200 bg-black">
		<div class="min-h-screen relative">
			<div id="aside-placeholder"></div>
			<main class="mx-32 p-4 mb-200">
				<h1 class="font-display">
					Surya Sanjay
				</h1>
				<h2>
					Procedural experience
				</h2>
				<h3>
					sdf
				</h3>
				<h4>
					There is a 
				</h4>
				<p>
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				</p>
				<h2>
					Procedural experience
				</h2>
				<h3>
					sdf
				</h3>
				<h4>
					There is a 
				</h4>
				<p>
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				</p>
				<h2>
					Procedural experience
				</h2>
				<h3>
					sdf
				</h3>
				<h4>
					There is a 
				</h4>
				<p>
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				This is some sample text.
				</p>
			</main>
		</div>

		<script>
			fetch('./src/snippets/aside.html')
				.then(response => {
					if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
					return response.text();
				})
				.then(html => {
					document.getElementById('aside-placeholder').innerHTML = html;
				})
				.catch(err => {
					console.error('Error loading aside snippet:', err);
				});
			
			const sidebar = document.getElementById('sidebar');
			const sidebarToggle = document.getElementById('sidebar-toggle')
			const sidebarText = document.querySelectorAll('.sidebar-text')
			const sidebarLink = document.querySelectorAll('.sidebar-link')
			const sidebarToggleSvg = document.getElementById('sidebar-svg')
			const dropdownToggle = document.querySelectorAll('.dropdown-toggle')

			const collapsedSVG = `
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4"> <path fill-rule="evenodd" d="M15 3.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0V5.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l3.97-3.97h-2.69a.75.75 0 0 1-.75-.75Zm-12 0A.75.75 0 0 1 3.75 3h4.5a.75.75 0 0 1 0 1.5H5.56l3.97 3.97a.75.75 0 0 1-1.06 1.06L4.5 5.56v2.69a.75.75 0 0 1-1.5 0v-4.5Zm11.47 11.78a.75.75 0 1 1 1.06-1.06l3.97 3.97v-2.69a.75.75 0 0 1 1.5 0v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h2.69l-3.97-3.97Zm-4.94-1.06a.75.75 0 0 1 0 1.06L5.56 19.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" /> </svg>
			`;

			const expandedSVG = `
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4"> <path fill-rule="evenodd" d="M3.22 3.22a.75.75 0 0 1 1.06 0l3.97 3.97V4.5a.75.75 0 0 1 1.5 0V9a.75.75 0 0 1-.75.75H4.5a.75.75 0 0 1 0-1.5h2.69L3.22 4.28a.75.75 0 0 1 0-1.06Zm17.56 0a.75.75 0 0 1 0 1.06l-3.97 3.97h2.69a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75V4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0ZM3.75 15a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-2.69l-3.97 3.97a.75.75 0 0 1-1.06-1.06l3.97-3.97H4.5a.75.75 0 0 1-.75-.75Zm10.5 0a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-2.69l3.97 3.97a.75.75 0 1 1-1.06 1.06l-3.97-3.97v2.69a.75.75 0 0 1-1.5 0V15Z" clip-rule="evenodd" /> </svg>
			`;

			let collapsed = false;

			dropdownToggle.forEach(el => {
				el.addEventListener('click', () => {
					el_parent = el.parentElement.parentElement;
					el_list = el_parent.querySelector('.dropdown-list');
					if (el_list.classList.contains('hidden')) {
						el.classList.add('rotate-270');
						el.classList.remove('text-blue-500');
						el_list.classList.remove('hidden');
						el_parent.classList.add('border-2');
						el_parent.classList.add('border-blue-200/25');
						el_parent.classList.add('rounded-xl')
						el_parent.classList.add('bg-slate-200/25')
						if (sidebar.classList.contains('w-32')) {
							sidebar.classList.remove('w-32');
							sidebar.classList.add('w-54');
							sidebarText.forEach(el => el.classList.remove('hidden'));
							sidebarToggle.innerHTML = expandedSVG;
						}
					} else {
						el.classList.remove('rotate-270');
						el.classList.add('text-blue-500');
						el_list.classList.add('hidden');
						el_parent.classList.remove('border-2');
						el_parent.classList.remove('border-blue-200/25');
						el_parent.classList.remove('rounded-xl')
						el_parent.classList.remove('bg-slate-200/25')
					}
				});
			});

			sidebarToggle.addEventListener('click', () => {
				collapsed = !collapsed;
				if (collapsed) {
					sidebar.classList.remove('w-54');
					sidebar.classList.add('w-32');
					sidebarText.forEach(el => el.classList.add('hidden'));
					sidebarToggle.innerHTML = collapsedSVG;
					dropdownToggle.forEach(el => {
						el_parent = el.parentElement.parentElement;
						el_list = el_parent.querySelector('.dropdown-list');
						if (!el_list.classList.contains('hidden')) {
							el.classList.remove('rotate-270');
							el.classList.add('text-blue-500');
							el_list.classList.add('hidden');
							el_parent.classList.remove('border-2');
							el_parent.classList.remove('border-blue-200/25');
							el_parent.classList.remove('rounded-xl')
							el_parent.classList.remove('bg-slate-200/25')
						}
					});
				} else {
					sidebar.classList.remove('w-32');
					sidebar.classList.add('w-54');
					sidebarText.forEach(el => el.classList.remove('hidden'));
					sidebarToggle.innerHTML = expandedSVG;
				}
			});

			const h2s = document.getElementsByTagName('h2');
			const toc = document.getElementById('toc');
			for (var i = 0; i < h2s.length; i++) {
				var h2 = h2s[i];
				toc.innerHTML += `<li class="truncate"><a href="#${h2.id}">${h2.textContent}</a></li>`;
			}
		</script>


	</body>

</html>
